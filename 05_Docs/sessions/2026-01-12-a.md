# Session: 2026-01-12-a

## Goal
Project reorganization, Directions setup, merge feature branches, add Sparkle auto-update

## Context
- Previous session: Various feature work (corner-radius, blur)
- Current phase: implementation

## Progress

### Completed
- [x] Reorganized project to numbered folder structure
  - `01_Project/` — Xcode project and source
  - `02_Design/` — Design assets (empty)
  - `03_Screenshots/` — App screenshots
  - `04_Exports/` — Built app and DMG
  - `05_Docs/` — Directions documentation
- [x] Set up Directions documentation system
- [x] Archived existing docs to `05_Docs/_archive/`
- [x] Populated PROJECT_STATE.md with project info
- [x] Populated decisions.md with 4 key decisions
- [x] Created project CLAUDE.md
- [x] Updated README.md with new paths
- [x] Ran discovery interview
- [x] Committed reorganization (`3eb906a`)
- [x] Merged `corner-radius` to main (fast-forward)
- [x] Merged `blur-again` to main (`f4539f8`)
- [x] Verified build works
- [x] Launched app for testing
- [x] Pushed all changes to GitHub
- [x] Deleted merged branches (local + remote)
- [x] Bumped version to 1.2 (`b82023e`)

### Sparkle Auto-Update Feature
- [x] Created `feature/sparkle-updates` branch
- [x] Added Sparkle 2.8.1 SPM dependency
- [x] Created `UpdateController.swift` (SwiftUI wrapper)
- [x] Added "Check for Updates..." menu command
- [x] Configured Info.plist with SUFeedURL, SUPublicEDKey
- [x] Created `appcast.xml` for GitHub releases
- [x] Documented signing key in `05_Docs/sparkle-signing.md`
- [x] Backed up private key to `~/.sparkle-keys/private-key.txt`
- [x] Merged to main (`b648b5e`)
- [x] Built and tested — menu works

### Release v1.2
- [x] Created DMG from notarized app
- [x] Signed DMG with `sign_update`
- [x] Updated `appcast.xml` with signature (`79dba48`)
- [x] Created GitHub release v1.2 with DMG
- [x] Updated README with app icon, new screenshots, new features
- [x] Replaced 6 old screenshots with 4 new ones (`a9578c4`)

### Discovered
- App is notarized but not sandboxed
- Primary use case: batch cropping iOS screenshots for pdf2calendar.eu docs
- "Works for me" polish level — personal tool shared publicly
- 61 downloads on GitHub releases
- Sparkle uses one shared key for all Xpycode apps (SyncthingStatus, CropBatch)
- Key was created Dec 2, 2025 — now backed up to prevent loss

### Decisions Made
- Project structure: numbered folders (01-05)
- Directions location: `05_Docs/` to match scheme
- Auto-update: Sparkle framework (same as SyncthingStatus)
- Signing key: shared across apps, backed up to `~/.sparkle-keys/`

## Commits This Session
- `3eb906a` Reorganize project to numbered folder structure
- `b82023e` Bump version to 1.2
- `b648b5e` Add Sparkle auto-update support
- `79dba48` Update appcast.xml with v1.2 release signature
- `a9578c4` Update README and screenshots for v1.2

## Next Session
- Monitor download count for v1.2
- Consider adding Settings UI toggle for auto-update checks

## Notes
- Folder watching is on hold
- MAS distribution is a "someday" goal
- v1.2 includes: corner radius, blur intensity, auto-update
- Release URL: https://github.com/Xpycode/CropBatch/releases/tag/v1.2
